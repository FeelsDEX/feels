# Feels Indexer Configuration for Mainnet
# Real data consumption from Solana mainnet

[geyser]
endpoint = "https://api.mainnet-beta.solana.com"  # Will be overridden by MAINNET_ENDPOINT if set
program_id = "J13h8cLst2B5H6RbWi9CVmeaDnAqio38uyJiUmAd1RPF"  # Feels Protocol program ID (update when deployed to mainnet)
commitment = "confirmed"
max_reconnect_attempts = 10
reconnect_delay_secs = 5

# Network configuration - loads endpoints from environment variables
use_triton = true   # Use Triton One for mainnet (better performance)
network = "mainnet" # This will load MAINNET_ENDPOINT and MAINNET_TOKEN from .env
token = ""  # Will be loaded from MAINNET_TOKEN environment variable

[storage]
tantivy_path = "../mainnet/indexer-storage/tantivy"

[storage.rocksdb]
path = "../mainnet/indexer-storage/rocksdb"
enable_compression = true
max_open_files = 2000
write_buffer_size_mb = 512
max_write_buffer_number = 8
block_cache_size_mb = 1024

[database]
postgres_url = "postgresql://localhost:5432/feels_mainnet"
max_connections = 20
min_connections = 5
acquire_timeout_secs = 30
idle_timeout_secs = 600
max_lifetime_secs = 1800

[redis]
url = "redis://localhost:6379"
max_connections = 20
connection_timeout_secs = 5
response_timeout_secs = 10

[search]
index_path = "../mainnet/indexer-storage/tantivy"
writer_memory_mb = 200
commit_interval_secs = 15
max_concurrent_searches = 8

[api]
bind_address = "0.0.0.0:8080"
enable_cors = true
cors_origins = ["https://feels.timewave.computer"]
request_timeout_secs = 30
max_request_size_mb = 10

[monitoring]
metrics_port = 9090
log_level = "info"
structured_logging = true
enable_tracing = true
enable_jaeger = true
jaeger_endpoint = "http://localhost:14268/api/traces"

[indexer]
batch_size = 200
flush_interval_secs = 5
max_lag_slots = 50
max_pending_transactions = 2000
enable_backfill = true
backfill_batch_size = 100
enable_account_indexing = true
enable_transaction_indexing = true
enable_position_tracking = true
enable_swap_tracking = true
